# This file is generated by SaltStack. Any changes will be overwritten
{% from "spark/map.jinja" import spark  with context %}

{% if spark.master_role in grains.roles  %}
SPARK_MASTER_HOST={{ spark.master_host|default('127.0.0.1')}}
{% else %}
SPARK_MASTER_HOST={{ spark.master_host|default('')  }}
{% endif %}
SPARK_MASTER_PORT={{ spark.master_port }}

{% if spark.worker_role in grains.roles  %}
SPARK_WORKER_CORES={{ spark.worker_cores }}
SPARK_WORKER_MEMORY={{ spark.worker_memory }}
SPARK_WORKER_INSTANCES={{ spark.worker_instances }}
SPARK_WORKER_WEBUI_PORT={{ spark.worker_webui_port }}
{% if spark.worker_dir %}SPARK_WORKER_DIR={{ spark.worker_dir }}{% endif %}

{%- if spark.worker_opts is mapping and len(spark.worker_opts.keys()) -%}
SPARK_WORKER_OPTS="{% for k,v in spark.worker_opts.items() %}-D{{ k }}={{ v }} {% endfor %}"
{% endif -%}

SPARK_DAEMON_MEMORY={{ spark.daemon_memory }}
SPARK_CONF_DIR={{ spark.config_dir }}
SPARK_LOG_DIR={{ spark.log_dir }}
SPARK_PID_DIR={{ spark.pid_dir }}
SPARK_NICENESS={{ spark.niceness }}
{%- if spark.daemon_java_opts -%}
SPARK_DAEMON_JAVA_OPTS="{% for k,v in spark.daemon_java_opts.items() %}-D{{ k }}={{ v }} {% endfor %}"
{% endif -%}

{% if spark.public_dns -%}
SPARK_PUBLIC_DNS={{ spark.public_dns }}
{% endif %}

{% endif %}
